<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <title>Refund Status Check</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{font-family:Arial,Helvetica,sans-serif; background:#f5f7fb; display:flex; align-items:center; flex-direction:column; padding:40px 10px;}
    .card{width:420px; background:#fff; border-radius:12px; padding:24px; box-shadow:0 6px 20px rgba(0,0,0,0.08); text-align:center;}
    h2{margin:0 0 14px 0}
    input{width:92%; padding:11px; margin:8px 0; border-radius:6px; border:1px solid #cfd8e3; font-size:15px}
    button{width:94%; padding:12px; margin-top:10px; border-radius:6px; border:none; background:#007bff; color:#fff; font-weight:600; cursor:pointer}
    #result{margin-top:14px; text-align:left; padding:12px; border-radius:6px}
    .ok{background:#e9f7ef; color:#125a2b}
    .err{background:#fdecea; color:#721c24}

    .row{display:flex; justify-content:space-between; padding:6px 0; border-bottom:1px dashed #eee}
    .label{font-weight:600; color:#333}
    .val{color:#111}
    small.note{display:block; margin-top:8px; color:#555; font-size:13px}

    .footer{margin-top:20px; text-align:center; color:#333; font-size:14px;}
  </style>
</head>
<body>

  <div class="card">
    <h2>Refund Status Check</h2>

    <input id="code" placeholder="Learner Code ‡§°‡§æ‡§≤‡•á‡§Ç" />
    <input id="name" placeholder="Student Name ‡§°‡§æ‡§≤‡•á‡§Ç" />
    <button id="check">Check Status</button>

    <div id="result"></div>

    <small class="note">Enter exact Learner Code and Student Name.</small>
  </div>

  <script>
    async function loadData(){
      try {
        const res = await fetch('results.json');
        return await res.json();
      } catch (e) {
        console.error(e);
        return [];
      }
    }

    function showMessage(html, cls='ok'){
      const r = document.getElementById('result');
      r.className = cls;
      r.innerHTML = html;
    }

    (async ()=>{
      const data = await loadData();

      document.getElementById('check').addEventListener('click', ()=>{

        const code = (document.getElementById('code').value||'').trim();
        const name = (document.getElementById('name').value||'').trim().toUpperCase();

        if(!code || !name){
          showMessage('<div class="err">‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§´‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç‡•§</div>', 'err');
          return;
        }

        const found = data.find(d => 
          String(d.learner_code).trim() === String(code).trim() &&
          String(d.name).trim().toUpperCase() === name
        );

        if(!found){
          showMessage('<div class="err">Record Not Found!</div>', 'err');
          return;
        }

        const html = `
          <div style="padding:6px 0">
            <div class="row"><div class="label">Learner</div><div class="val">${found.name}</div></div>
            <div class="row"><div class="label">Invoice</div><div class="val">${found.invoice}</div></div>
            <div class="row"><div class="label">Amount</div><div class="val">‚Çπ${found.amount}</div></div>

            <div style="margin-top:10px; font-weight:700; color:#0b6623">
              Amount successfully refunded to your bank account
            </div>

            <div style="margin-top:12px; padding-top:10px; border-top:1px solid #eee">
              <div class="row"><div class="label">Center Name</div><div class="val">${found.center_name}</div></div>
              <div class="row"><div class="label">Center Code</div><div class="val">${found.center_code}</div></div>
              <div class="row"><div class="label">Center Manager</div><div class="val">${found.center_manager}</div></div>
              <div class="row"><div class="label">Contact Number</div><div class="val">${found.center_contact}</div></div>
            </div>

            <div style="margin-top:8px; font-size:12px; color:#555">
              Advice Date: ${found.advice_date}
            </div>
          </div>
        `;
        showMessage(html, 'ok');
      });
    })();
  </script>

  <!-- FOOTER -->
  <div class="footer">
      üìû <b>Helpline:</b> 7033151758 <br>
      Developed by <b>Ektab Alam</b>
  </div>

</body>
</html>
