<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>KYP Super Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial;
  background:#0f172a;
  margin:0;
  padding:20px;
  color:white;
}

.container{
  max-width:900px;
  margin:auto;
}

.card{
  background:#111827;
  padding:20px;
  border-radius:12px;
  margin-bottom:20px;
}

input,select,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:8px;
  border:none;
  font-size:15px;
}

button{
  background:#2563eb;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

button:hover{
  background:#1d4ed8;
}

.student{
  background:#1f2937;
  padding:12px;
  border-radius:8px;
  margin-top:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.delete{
  background:red;
  width:auto;
  padding:6px 12px;
}
</style>
</head>

<body>

<div class="container">

<h2>ðŸ”¥ KYP SUPER ADMIN PANEL</h2>

<div class="card">
<h3>Add Student</h3>

<input id="code" placeholder="Learner Code">
<input id="name" placeholder="Student Name">
<input id="batch" placeholder="Batch">
<select id="result">
<option value="PASS">PASS</option>
<option value="FAIL">FAIL</option>
</select>

<button onclick="addStudent()">Add Student</button>
</div>

<div class="card">
<h3>All Students</h3>
<div id="list"></div>
</div>

</div>

<!-- ðŸ”¥ FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBtRcPSgV49ybyLcH1P9Ar5GJoUEOdhNvQ",
  authDomain: "kyp-result-portal.firebaseapp.com",
  projectId: "kyp-result-portal",
  storageBucket: "kyp-result-portal.firebasestorage.app",
  messagingSenderId: "454908710797",
  appId: "1:454908710797:web:4ddac5514e53f15819f7c4",
  measurementId: "G-L94BZ8H6MV"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.addStudent = async function(){

  const code = document.getElementById("code").value;
  const name = document.getElementById("name").value;
  const batch = document.getElementById("batch").value;
  const result = document.getElementById("result").value;

  if(!code || !name) return alert("Fill all fields");

  await addDoc(collection(db,"students"),{
    code,name,batch,result
  });

  alert("âœ… Student Added");
  loadStudents();
}

async function loadStudents(){
  const list = document.getElementById("list");
  list.innerHTML="Loading...";

  const snap = await getDocs(collection(db,"students"));

  list.innerHTML="";

  snap.forEach(d=>{
    const s = d.data();

    list.innerHTML += `
      <div class="student">
        <div>
          <b>${s.name}</b><br>
          Code: ${s.code} | ${s.result}
        </div>
        <button class="delete" onclick="del('${d.id}')">Delete</button>
      </div>
    `;
  });
}

window.del = async function(id){
  await deleteDoc(doc(db,"students",id));
  loadStudents();
}

loadStudents();
</script>

</body>
</html>
